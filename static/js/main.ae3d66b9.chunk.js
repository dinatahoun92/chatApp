(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{140:function(e,t,a){e.exports=a(201)},145:function(e,t,a){},201:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),i=a.n(o),c=(a(145),a(203)),l=a(244),s=a(30),u=a(16),m=a(245),d=a(247),p=a(3),f=a(50),g=a(248),h=a(114),b=a.n(h),v=a(113),E=a(14),x=a(91),j=a.n(x);a(152),a(154),a(202);j.a.initializeApp({apiKey:"AIzaSyDwrKMrnfTXfdrHxTxufReRCgx4rT5HK48",authDomain:"chatapp992.firebaseapp.com",databaseURL:"https://chatapp992.firebaseio.com",projectId:"chatapp992",storageBucket:"",messagingSenderId:"551478560544",appId:"1:551478560544:web:8e5b30b209a7a7b3"});var O=j.a,w=a(249),y=function(e){return{type:"BURGER",value:e}},C=function(e){return{type:"USER_NAME",value:e}},S=function(e){return{type:"ROOM",value:e}},N=Object(c.a)(function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(u.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(s.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)},typography:{flexGrow:1}}});function I(){var e=N(),t=(Object(v.a)(),Object(E.b)()),a=Object(E.c)(function(e){return e.open}),n=Object(E.c)(function(e){return e.userReducer.user});return r.a.createElement("div",{className:e.root},r.a.createElement(l.a,null),r.a.createElement(m.a,{position:"fixed",className:Object(p.a)(e.appBar,Object(u.a)({},e.appBarShift,a)),color:"default"},r.a.createElement(d.a,null,r.a.createElement(g.a,{color:"inherit","aria-label":"Open drawer",onClick:function(){return t(y(!1))},edge:"start",className:Object(p.a)(e.menuButton,Object(u.a)({},e.hide,a))},r.a.createElement(b.a,null)),r.a.createElement(f.a,{variant:"h6",noWrap:!0,className:e.typography},n),r.a.createElement(w.a,{variant:"outlined",color:"default",onClick:function(){O.auth().signOut().then(function(){console.log("sign out")}).catch(function(e){return console.log(e)})}},"sign out"))))}var k=a(58),R=a(17),T=a(270),W=a(250),B=a(116),A=a.n(B),D=a(115),P=a.n(D),z=a(268),U=a(255),G=a(261),L=a(257),M=a(258),q=a(256),F=a(251),K=a(117),V=a.n(K),X=a(252),_=a(253),H=a(254),J=a(273),Y=Object(c.a)(function(e){return{root:{display:"flex"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(u.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:0},e.breakpoints.up("sm"),{width:0}),toolbar:Object(s.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)},rooms:{display:"flex",flexDirection:"column"},fab:{margin:e.spacing(1),width:"45px",height:"45px"},roomsTitle:{padding:"20px",fontSize:"20px",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"space-between"},roomsLi:{listStyle:"none",cursor:"pointer",padding:"10px 0"},activeRoom:{borderRight:"4px solid #303f9f",backgroundColor:"#333"}}});var $=Object(J.a)()(function(){var e,t,a=Object(E.b)(),o=Object(E.c)(function(e){return e.burgerReducer.open}),i=(Object(E.c)(function(e){return e.userReducer.user}),Object(E.c)(function(e){return e.roomReducer})),c=O.database().ref("rooms"),s=c.push().key,m=Object(n.useState)([]),d=Object(R.a)(m,2),h=d[0],b=d[1],x=Object(n.useState)(""),j=Object(R.a)(x,2),C=j[0],N=j[1],I=Object(n.useRef)();I.current=h;var B=r.a.useState(!1),D=Object(R.a)(B,2),K=D[0],J=D[1];function $(){J(!1)}var Q=Y(),Z=Object(v.a)();return Object(n.useEffect)(function(){return c.on("child_added",function(e){var t=Object(k.a)(I.current);t.push(e.val()),b(t)},function(e){console.log("The read failed: "+e.code)}),function(){return console.log("room removed"),void c.off()}},[]),console.log(i),r.a.createElement("div",{className:Q.root},r.a.createElement(l.a,null),r.a.createElement(T.a,{variant:"persistent",anchor:"left",className:Object(p.a)(Q.drawer,(e={},Object(u.a)(e,Q.drawerOpen,o),Object(u.a)(e,Q.drawerClose,!o),e)),classes:{paper:Object(p.a)((t={},Object(u.a)(t,Q.drawerOpen,o),Object(u.a)(t,Q.drawerClose,!o),t))},open:o},r.a.createElement("div",{className:Q.toolbar},r.a.createElement(g.a,{onClick:function(){return a(y(!1))}},"rtl"===Z.direction?r.a.createElement(P.a,null):r.a.createElement(A.a,null))),r.a.createElement(W.a,null),r.a.createElement(f.a,{variant:"h3",display:"inline",gutterBottom:!0,className:Q.roomsTitle},"Rooms",r.a.createElement(F.a,{color:"primary","aria-label":"Add",className:Q.fab,onClick:function(){J(!0)}},r.a.createElement(V.a,null))),r.a.createElement(X.a,{component:"nav","aria-label":"Secondary mailbox folders"},h.map(function(e,t){return i&&e.roomId!==i.roomId?r.a.createElement(_.a,{button:!0,onClick:function(){a(S(h[t]))}},r.a.createElement(H.a,{primary:"# "+e.roomName})):r.a.createElement(_.a,{className:Q.activeRoom,button:!0,onClick:function(){a(S(h[t]))}},r.a.createElement(H.a,{primary:"# "+e.roomName}))}))),r.a.createElement(U.a,{open:K,onClose:$,"aria-labelledby":"form-dialog-title"},r.a.createElement(q.a,{id:"form-dialog-title"},"Add Room"),r.a.createElement(L.a,null,r.a.createElement(M.a,null,"To add new room to this chat, please enter chat name here."),r.a.createElement(z.a,{autoFocus:!0,margin:"dense",id:"chatName",label:"Chat Name",type:"text",fullWidth:!0,value:C,onChange:function(e){return N(e.target.value)}})),r.a.createElement(G.a,null,r.a.createElement(w.a,{onClick:$,color:"primary"},"Cancel"),r.a.createElement(w.a,{onClick:function(){$(),function(){var e={roomName:C,roomId:s,roomDesc:"room desc"};c.child(s).set(e).then(function(e){console.log("sucess set : ".concat(e))}).catch(function(e){return console.log(e)})}()},color:"primary"},"Add"))))}),Q=a(125),Z=a(272),ee=a(120),te=a.n(ee),ae=a(262),ne=a(263),re=a(118),oe=a.n(re),ie=a(119),ce=a.n(ie),le=a(63),se=Object(c.a)(function(e){var t;return{root:Object(u.a)({display:"flex",marginTop:"65px",width:"100%",height:"calc(100vh - 65px)",flexDirection:"column",alignContent:"flex-end"},"height","calc(100vh - 65px)"),listsRoot:(t={backgroundColor:e.palette.background.paper},Object(u.a)(t,"backgroundColor","transparent"),Object(u.a)(t,"justifyContent","center"),t),inline:{display:"inline"},btnRoot:{padding:"2px 4px",display:"flex",alignItems:"center",width:"100%",position:"sticky",bottom:0,zIndex:99999999},paper:{width:"100%",display:"flex"},input:{marginLeft:8,flex:1},iconButton:{padding:10,fontSize:"50px"},divider:{width:1,height:28,margin:4},drawer:Object(u.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:Object(u.a)({marginLeft:240},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)")}),menuButton:Object(u.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3)},avatarSelf:{textTransform:"uppercase"},avatar:{textTransform:"uppercase",backgroundColor:"#3f51b5",color:"#f2f2f2"},chatTxt:{display:"flex",padding:"20px",borderRadius:"20px",justifyContent:"center",flexDirection:"column",backgroundColor:"#504c4c",maxWidth:"65%"},chatTxtSelf:{display:"flex",padding:"20px",borderRadius:"20px",justifyContent:"center",flexDirection:"column",backgroundColor:"#111",maxWidth:"65%"},chatItemSelf:{display:"flex",justifyContent:"flex-end"},chatItem:{display:"flex",justifyContent:"flex-start"},txt:{paddingTop:"10px",paddingBottom:"10px",letterSpacing:"2px",fontWeight:300,wordBreak:"break-all"},userChat:{fontWeight:500,fontSize:"14px",letterSpacing:"2px",textTransform:"uppercase"},timeSelf:{fontSize:"10px",color:"#f2f2f2",textAlign:"right",paddingRight:"16px",marginBottom:"20px",width:"70%"},time:{fontSize:"10px",color:"#f2f2f2",textAlign:"right",paddingRight:"16px",marginBottom:"20px"}}});function ue(){Object(E.b)();var e=Object(E.c)(function(e){return e.roomReducer}),t=Object(E.c)(function(e){return e.userReducer}),a=Object(n.useState)([]),o=Object(R.a)(a,2),i=o[0],c=o[1],s=Object(n.useState)(""),u=Object(R.a)(s,2),m=u[0],d=u[1],p=Object(n.useRef)(),g=Object(n.useRef)(),h=Object(le.css)({height:"100vh",width:"100%"});p.current=i;var b=O.database().ref("messages").child(e.roomId),v=b.push().key,x={msgId:v,msgText:m,room:e.roomId,timestamp:O.database.ServerValue.TIMESTAMP,user:t};Object(n.useEffect)(function(){return g.current.scrollIntoView({block:"start"}),c([]),b.on("child_added",function(e){var t=Object(k.a)(p.current);t.push(e.val()),c(t)},function(e){console.log("The read failed: "+e.code)}),console.log(i),function(){return console.log("msg removed"),void b.off()}},[e.roomId]);var j=se();return r.a.createElement(ce.a,{className:h},r.a.createElement("div",{className:j.root,alignItems:"flex-end"},r.a.createElement(l.a,null),r.a.createElement("div",{style:{flexGrow:1}}),r.a.createElement(X.a,{className:j.listsRoot,ref:g},i.map(function(e,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{key:a,className:e.user.userId===t.userId?j.chatItemSelf:j.chatItem},r.a.createElement(ae.a,null,r.a.createElement(ne.a,{className:e.user.userId===t.userId?j.avatarSelf:j.avatar},e.user.user.substring(0,1))),r.a.createElement(H.a,{className:e.user.userId===t.userId?j.chatTxtSelf:j.chatTxt,primary:r.a.createElement(f.a,{component:"h5",variant:"body2",className:j.userChat,color:"textPrimary"},e.user.user),secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{component:"h5",variant:"body2",className:j.txt,color:"textPrimary"},e.msgText))})),r.a.createElement(f.a,{component:"h5",variant:"body2",className:e.user.userId===t.userId?j.time:j.timeSelf,color:"textPrimary"},oe()(e.timestamp).fromNow()))})),r.a.createElement(Q.a,{className:j.btnRoot},r.a.createElement(Z.a,{className:j.input,placeholder:"write your messages ...",onChange:function(e){return d(e.target.value)},value:m,onKeyPress:function(e){"Enter"===e.key&&b.child(v).set(x).then(function(e){console.log("sucess set : ".concat(e)),d("")}).catch(function(e){return console.log(e)})}}),r.a.createElement(W.a,{className:j.divider}),r.a.createElement(te.a,{color:"primary",className:j.iconButton,"aria-label":"Directions",onClick:function(){return b.child(v).set(x).then(function(e){console.log("sucess set : ".concat(e)),d("")}).catch(function(e){return console.log(e)})}}))))}var me=a(123),de=a(271),pe=Object(c.a)(function(e){return{root:{display:"flex"}}});function fe(){var e=pe(),t=Object(me.a)({palette:{type:"dark"},props:{MuiWithWidth:{initialWidth:"lg"}}});return r.a.createElement(de.a,{theme:t},r.a.createElement("div",{className:e.root},r.a.createElement(l.a,null),r.a.createElement(I,null),r.a.createElement($,null),r.a.createElement(ue,null)))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ge=a(42);var he={user:"",userId:""};a(199);var be={roomName:"room name 1",roomId:"-LjGY2z7bYPepIXdjxOP",roomDesc:"room 1 desc"};var ve=Object(ge.c)({burgerReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.innerWidth<=500?{open:!1}:{open:!0};switch((arguments.length>1?arguments[1]:void 0).type){case"BURGER":return{open:!e.open};default:return Object(s.a)({},e)}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(Object(s.a)({},e),t.type){case"USER_NAME":return{user:t.value.user,userId:t.value.userId};default:return Object(s.a)({},e)}},roomReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ROOM":return{roomId:t.value.roomId,roomName:t.value.roomName,roomDesc:t.value.roomDesc};default:return Object(s.a)({},e)}}}),Ee=a(121),xe=a(43),je=a(266),Oe=a(269),we=a(40),ye=a(265),Ce=a(267),Se=a(80),Ne=a.n(Se),Ie=a(264),ke=a(260),Re=a(259),Te=Object(c.a)(function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}});function We(e){var t=e.history,a=Te(),o=Object(n.useState)(""),i=Object(R.a)(o,2),c=i[0],s=i[1],u=Object(n.useState)(""),m=Object(R.a)(u,2),d=m[0],p=m[1],g=Object(n.useState)(""),h=Object(R.a)(g,2),b=h[0],v=h[1],x=Object(n.useState)(""),j=Object(R.a)(x,2),y=j[0],S=j[1],N=Object(n.useState)(!1),I=Object(R.a)(N,2),k=I[0],T=I[1],W=(Object(E.c)(function(e){return e.userReducer.user}),Object(n.useState)("")),B=Object(R.a)(W,2),A=B[0],D=B[1],P=Object(E.b)(),U=function(e){e.preventDefault(),O.auth().createUserWithEmailAndPassword(y,b).then(function(e){e.user.updateProfile({displayName:c}).then(function(){P(C({user:c,userId:e.user.uid})),t.push("/")})}).catch(function(e){console.log(e),D(e.message)})};return r.a.createElement(Ie.a,{component:"main",maxWidth:"xs"},r.a.createElement(l.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(ne.a,{className:a.avatar},r.a.createElement(Ne.a,null)),r.a.createElement(f.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:a.form,noValidate:!0},r.a.createElement(ye.a,{container:!0,spacing:2},r.a.createElement(ye.a,{item:!0,xs:12},r.a.createElement(z.a,{variant:"outlined",required:!0,fullWidth:!0,id:"userName",label:"User Name",name:"userName",autoComplete:"lname",value:c,onChange:function(e){s(e.target.value),e.target.value.length?(p(""),T(!1)):(p("User name mustn't be empty"),T(!0))}})),r.a.createElement(ye.a,{item:!0,xs:12},r.a.createElement(z.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:y,onChange:function(e){return S(e.target.value)}})),r.a.createElement(ye.a,{item:!0,xs:12},r.a.createElement(z.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:b,onChange:function(e){return v(e.target.value)}})),r.a.createElement(Re.a,{className:a.formControl,error:!0},r.a.createElement(ke.a,{id:"component-error-text"},A),r.a.createElement(ke.a,{id:"component-error-text"},d)),r.a.createElement(ye.a,{item:!0,xs:12},r.a.createElement(je.a,{control:r.a.createElement(Oe.a,{value:"allowExtraEmails",color:"primary"}),label:"I want to receive inspiration, marketing promotions and updates via email."}))),c.length&&b.length&&y.length?r.a.createElement(w.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:U,disabled:k},"Sign Up"):r.a.createElement(w.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:U,disabled:!0},"Sign Up"),r.a.createElement(ye.a,{container:!0,justify:"flex-end"},r.a.createElement(ye.a,{item:!0},r.a.createElement(we.b,{to:"/login",variant:"body2"},"Already have an account? Sign in"))))),r.a.createElement(Ce.a,{mt:5}))}var Be=Object(c.a)(function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},formControl:{width:"100%"}}});function Ae(e){var t=e.history,a=Be(),o=Object(n.useState)(""),i=Object(R.a)(o,2),c=i[0],s=i[1],u=Object(n.useState)(""),m=Object(R.a)(u,2),d=m[0],p=m[1],g=Object(E.b)(),h=Object(n.useState)(""),b=Object(R.a)(h,2),v=b[0],x=b[1],j=function(e){e.preventDefault(),O.auth().signInWithEmailAndPassword(d,c).then(function(e){console.log(e),g(C({user:e.user.displayName,userId:e.user.uid})),t.push("/")}).catch(function(e){console.log(e),x(e.message)})};return r.a.createElement(Ie.a,{component:"main",maxWidth:"xs"},r.a.createElement(l.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(ne.a,{className:a.avatar},r.a.createElement(Ne.a,null)),r.a.createElement(f.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:a.form,noValidate:!0},r.a.createElement(Re.a,{className:a.formControl,error:!0},r.a.createElement(z.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:d,onChange:function(e){return p(e.target.value)}})),r.a.createElement(z.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:c,onChange:function(e){return s(e.target.value)}}),r.a.createElement(je.a,{control:r.a.createElement(Oe.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(Re.a,{className:a.formControl,error:!0},r.a.createElement(ke.a,{id:"component-error-text"},v)),c.length&&d.length?r.a.createElement(w.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:j,disabled:!1},"Sign In"):r.a.createElement(w.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:j,disabled:!0},"Sign In"),r.a.createElement(ye.a,{container:!0},r.a.createElement(ye.a,{item:!0,xs:!0}),r.a.createElement(ye.a,{item:!0},r.a.createElement(we.b,{to:"/register",variant:"body2"},"Don't have an account? Sign Up"))))),r.a.createElement(Ce.a,{mt:5}))}var De=Object(xe.f)(function(e){var t=e.history,a=(Object(E.c)(function(e){return e.user}),Object(E.b)());return Object(n.useEffect)(function(){O.auth().onAuthStateChanged(function(e){e?(console.log("allready logged in -> navigate to /"),a(C({user:e.displayName,userId:e.uid})),t.push("/")):(console.log("not logged in -> navigate to /Login"),t.push("/Login"))})},[]),r.a.createElement(xe.c,null,r.a.createElement(xe.a,{exact:!0,path:"/",component:fe}),r.a.createElement(xe.a,{exact:!0,path:"/register",component:We}),r.a.createElement(xe.a,{exact:!0,path:"/login",component:Ae}))}),Pe=Object(ge.e)(ve,Object(ge.d)(Object(ge.a)(Ee.a),window.devToolsExtension?window.devToolsExtension():function(e){return e}));i.a.render(r.a.createElement(E.a,{store:Pe},r.a.createElement(we.a,null,r.a.createElement(De,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[140,1,2]]]);
//# sourceMappingURL=main.ae3d66b9.chunk.js.map